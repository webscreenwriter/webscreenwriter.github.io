<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
  <meta property="og:title" content="Web Screenwriter - Free, Open-Source Screenwriting">
  <meta property="og:description" content="Have fun! (:">
  <meta property="og:image" content="https://github.com/webscreenwriter/webscreenwriter.github.io/blob/f138fd31187d68426aee402a1c98406531408570/IMG_3061.JPG">
</head>
<body>
  <div id="container">
    <!-- Add static textareas here -->
    <div class="header-textareas">
      <label for="title">Title: <textarea id="title"></textarea></label>
      <label for="credit">Written By: <textarea id="credit"></textarea></label>
      <label for="copyright">Copyright: <textarea id="copyright"></textarea></label>
      <label for="date">Draft Date: <textarea id="date"></textarea></label>
      <label for="contact">Contact: <textarea id="contact"></textarea></label>
    </div>
  </div>

  <script>
    const container = document.getElementById('container');
    const headerTextareas = document.querySelector('.header-textareas');

    // Load from localStorage on page load for header textareas
    document.addEventListener('DOMContentLoaded', () => {
      const savedHeaderData = JSON.parse(localStorage.getItem('headerTextareas')) || {
        title: '',
        credit: '',
        copyright: '',
        date: '',
        contact: ''
      };
      
      // Set the values of header textareas from saved data
      document.getElementById('title').value = savedHeaderData.title;
      document.getElementById('credit').value = savedHeaderData.credit;
      document.getElementById('copyright').value = savedHeaderData.copyright;
      document.getElementById('date').value = savedHeaderData.date;
      document.getElementById('contact').value = savedHeaderData.contact;

      // Load dynamic textareas if they exist in localStorage
      const savedData = JSON.parse(localStorage.getItem('textareas')) || [];
      savedData.forEach((text, index) => {
        addTextarea(text, index);
      });
    });

    // Event listeners for auto-saving header textareas
    headerTextareas.querySelectorAll('textarea').forEach(textarea => {
      textarea.addEventListener('input', saveHeaderTextareas);
    });

    // Save header textarea data to localStorage
    function saveHeaderTextareas() {
      const headerData = {
        title: document.getElementById('title').value,
        credit: document.getElementById('credit').value,
        copyright: document.getElementById('copyright').value,
        date: document.getElementById('date').value,
        contact: document.getElementById('contact').value
      };
      localStorage.setItem('headerTextareas', JSON.stringify(headerData));
    }

    // Create and add a new dynamic textarea
    function addTextarea(value = '', index = null) {
      const textarea = document.createElement('textarea');
      textarea.className = 'dynamic-textarea';
      textarea.placeholder = 'Start typing...';
      textarea.value = value;
      textarea.dataset.index = index !== null ? index : container.children.length;

      // Add input listener to auto-save dynamic textareas
      textarea.addEventListener('input', saveAllTextareas);

      // Convert to uppercase on Tab key press
      textarea.addEventListener('keydown', (e) => {
        if (e.key === 'Tab') {
          e.preventDefault();
          textarea.value = textarea.value.toUpperCase();
          saveAllTextareas(); // Save after uppercase conversion
        }
      });

      container.appendChild(textarea);
      textarea.focus();
    }

    // Save all dynamic textarea values to localStorage
    function saveAllTextareas() {
      const allTextareas = container.querySelectorAll('textarea.dynamic-textarea');
      const data = Array.from(allTextareas).map(t => t.value);
      localStorage.setItem('textareas', JSON.stringify(data));
    }

    // Add new dynamic textarea on Enter key (when body is focused on a textarea)
    document.body.addEventListener('keydown', (event) => {
      if (event.key === 'Enter') {
        if (document.activeElement.tagName === 'TEXTAREA' || document.activeElement.classList.contains('dynamic-textarea')) {
        event.preventDefault();
        addTextarea('');
        }
      }
    });
  </script>

  <script type='text/javascript' src='https://storage.ko-fi.com/cdn/widget/Widget_2.js'></script>
  <script type='text/javascript'>
    kofiwidget2.init('Donate', '#72a4f2', 'Y8Y71LEFO9');
    kofiwidget2.draw();
  </script>
</body>
</html>
